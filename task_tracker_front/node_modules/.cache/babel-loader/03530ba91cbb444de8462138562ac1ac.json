{"ast":null,"code":"import _defineProperty from \"C:\\\\projects\\\\taskTraker\\\\task_tracker_front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\projects\\\\taskTraker\\\\task_tracker_front\\\\src\\\\components\\\\Users\\\\Users.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Button from 'react-bootstrap/Button';\nimport * as css from \"./Styles.css\";\nimport CreateUserModal from '../CreateUserModal';\nimport { connect } from 'react-redux';\nimport ActionTypes from '../../store/Actions/index.js';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\nimport Form from 'react-bootstrap/Form';\n\nclass Users extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.getUsersListHandler();\n    };\n\n    this.createUserHandler = data => {\n      axios.post('http://localhost:57392/user', _objectSpread({}, data, {\n        apikey: this.props.userReducer.apikey\n      })).then(response => {\n        if (response.data.error) {\n          alert(response.data.error);\n        } else {\n          alert(\"Внимание! Сохраните пароль для авторизации пользователя: \" + response.data.data);\n        }\n\n        this.setShow(false);\n        this.getUsersListHandler();\n      });\n    };\n\n    this.getUsersListHandler = () => {\n      axios.get('http://localhost:57392/user?apikey=' + this.props.userReducer.apikey).then(response => {\n        if (response.data.error) {\n          alert(response.data.error);\n        } else {\n          this.setState({\n            users: response.data.data,\n            isRequested: true\n          });\n        }\n      });\n    };\n\n    this.getStatisticHandler = () => {\n      axios.get('http://localhost:57392/statistic?apikey=' + this.props.userReducer.apikey).then(response => {\n        if (response.data.error) {\n          alert(response.data.error);\n        } else {\n          console.log(response.data);\n          let filename = \"tasks_statistic.xls\";\n          let url = window.URL.createObjectURL(new Blob([response.data]));\n          saveAs(url, filename);\n        }\n      });\n    };\n\n    this.setShow = value => {\n      this.setState({\n        isShow: value\n      });\n    };\n\n    this.state = {\n      users: [],\n      isShow: false,\n      isRequested: false\n    };\n  }\n\n  render() {\n    if (this.state.isRequested) {\n      return React.createElement(\"div\", {\n        className: \"main_fon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"inline_block_common\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438: \"), React.createElement(Button, {\n        className: \"button_padding\",\n        variant: \"outline-primary\",\n        onClick: () => this.getStatisticHandler(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0443\")), React.createElement(Button, {\n        className: \"button_padding_1\",\n        variant: \"outline-primary\",\n        onClick: () => this.setShow(true),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"), React.createElement(\"div\", {\n        className: \"inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"birthday\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\\u0430\"), React.createElement(Form.Control, {\n        onChange: this.handlerDeadlineDate,\n        placeholder: \"01.19.1998\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"birthday\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"\\u041A\\u043E\\u043D\\u0435\\u0446 \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\\u0430\"), React.createElement(Form.Control, {\n        onChange: this.handlerDeadlineDate,\n        placeholder: \"01.19.1998\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        className: \"button_padding\",\n        variant: \"outline-primary\",\n        onClick: () => this.setShow(true),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0444\\u043E\\u0440\\u043C\\u0443\"))), React.createElement(ListGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(ListGroup.Item, {\n        className: \"inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"inline_element\",\n        href: \"/proj\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"\\u0418\\u043C\\u044F\"), React.createElement(\"div\", {\n        className: \"inline_element_email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"email\"), React.createElement(\"div\", {\n        className: \"inline_element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043D\\u0435\\u0437\\u0430\\u043A\\u0440\\u044B\\u0442\\u044B\\u0445 \\u0437\\u0430\\u0434\\u0430\\u0447\"), React.createElement(\"div\", {\n        className: \"inline_element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0437\\u0430\\u043A\\u0440\\u044B\\u0442\\u044B\\u0445 \\u0437\\u0430\\u0434\\u0430\\u0447\")), this.state.users.map(usr => React.createElement(ListGroup.Item, {\n        className: \"inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"inline_element\",\n        href: \"/userPage/\" + usr.user_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, usr.full_name), React.createElement(\"div\", {\n        className: \"inline_element_email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, usr.email), React.createElement(\"div\", {\n        className: \"inline_element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, usr.count_open_tasks), React.createElement(\"div\", {\n        className: \"inline_element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, usr.count_closed_tasks)))), React.createElement(CreateUserModal, {\n        show: this.state.isShow,\n        onHide: () => this.setShow(false),\n        onSave: data => this.createUserHandler(data),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Loading...\");\n    }\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  userReducer: state.UserReduser,\n  user: state.Users,\n  isShow: false,\n  isRequested: state.Users ? state.Users.IsRequested : false\n});\n\nexport default connect(mapStateToProps, null)(Users);","map":{"version":3,"sources":["C:/projects/taskTraker/task_tracker_front/src/components/Users/Users.jsx"],"names":["React","Component","ListGroup","Button","css","CreateUserModal","connect","ActionTypes","axios","saveAs","Form","Users","constructor","props","componentDidMount","getUsersListHandler","createUserHandler","data","post","apikey","userReducer","then","response","error","alert","setShow","get","setState","users","isRequested","getStatisticHandler","console","log","filename","url","window","URL","createObjectURL","Blob","value","isShow","state","render","handlerDeadlineDate","map","usr","user_id","full_name","email","count_open_tasks","count_closed_tasks","mapStateToProps","UserReduser","user","IsRequested"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button'\r\nimport * as css from \"./Styles.css\";\r\nimport CreateUserModal from '../CreateUserModal';\r\nimport { connect } from 'react-redux';\r\nimport ActionTypes from '../../store/Actions/index.js';\r\nimport axios from 'axios';\r\nimport { saveAs } from 'file-saver';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\nclass Users extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            isShow: false,\r\n            isRequested: false\r\n        };\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.getUsersListHandler();\r\n    };\r\n\r\n    createUserHandler = (data) => {\r\n        axios.post('http://localhost:57392/user',\r\n            {\r\n                ...data,\r\n                apikey: this.props.userReducer.apikey\r\n            }).then(response => {\r\n                if (response.data.error) {\r\n                    alert(response.data.error);\r\n                } else {\r\n                    alert(\"Внимание! Сохраните пароль для авторизации пользователя: \" + response.data.data);\r\n                }\r\n                this.setShow(false);\r\n                this.getUsersListHandler();\r\n            });\r\n    }\r\n\r\n    getUsersListHandler = () => {\r\n        axios.get('http://localhost:57392/user?apikey=' + this.props.userReducer.apikey).then(response => {\r\n            if (response.data.error) {\r\n                alert(response.data.error);\r\n            } else {\r\n                this.setState({ users: response.data.data, isRequested: true });\r\n            }\r\n        });\r\n    }\r\n\r\n    getStatisticHandler = () => {\r\n        axios.get('http://localhost:57392/statistic?apikey=' + this.props.userReducer.apikey).then(response => {\r\n            if (response.data.error) {\r\n                alert(response.data.error);\r\n            } else {\r\n                console.log(response.data);\r\n                let filename = \"tasks_statistic.xls\";\r\n\r\n                let url = window.URL\r\n                    .createObjectURL(new Blob([response.data]));\r\n                saveAs(url, filename);\r\n            }\r\n        });\r\n    }\r\n\r\n    setShow = (value) => {\r\n        this.setState({ isShow: value });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.isRequested) {\r\n            return <div className=\"main_fon\">\r\n                <div className=\"inline_block_common\">\r\n                    <div className=\"inline_block\">\r\n                        <div className=\"text_title\">Пользователи: </div>\r\n                        <Button className=\"button_padding\" variant=\"outline-primary\" onClick={() => this.getStatisticHandler()}>Выгрузить статистику</Button>\r\n                    </div>\r\n                    <Button className=\"button_padding_1\" variant=\"outline-primary\" onClick={() => this.setShow(true)}>Добавить пользователя</Button>\r\n\r\n                    <div className=\"inline_block\">\r\n                        <Form>\r\n                            <Form.Group controlId=\"birthday\">\r\n                                <Form.Label>Начало периода</Form.Label>\r\n                                <Form.Control onChange={this.handlerDeadlineDate} placeholder=\"01.19.1998\" />\r\n                            </Form.Group>\r\n\r\n                            <Form.Group controlId=\"birthday\">\r\n                                <Form.Label>Конец периода</Form.Label>\r\n                                <Form.Control onChange={this.handlerDeadlineDate} placeholder=\"01.19.1998\" />\r\n                            </Form.Group>\r\n\r\n                        </Form>\r\n                        <Button\r\n                            className=\"button_padding\"\r\n                            variant=\"outline-primary\"\r\n                            onClick={() => this.setShow(true)}>\r\n                            Получить форму\r\n                            </Button>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n\r\n                <ListGroup>\r\n                    <ListGroup.Item className=\"inline_block\">\r\n                        <div className=\"inline_element\" href=\"/proj\">Имя</div>\r\n                        <div className=\"inline_element_email\">email</div>\r\n                        <div className=\"inline_element\">Количество незакрытых задач</div>\r\n                        <div className=\"inline_element\">Количество закрытых задач</div>\r\n                    </ListGroup.Item>\r\n                    {\r\n                        this.state.users.map(usr => (\r\n                            <ListGroup.Item className=\"inline_block\">\r\n                                <a className=\"inline_element\" href={\"/userPage/\" + usr.user_id}>{usr.full_name}</a>\r\n                                <div className=\"inline_element_email\">{usr.email}</div>\r\n                                <div className=\"inline_element\">{usr.count_open_tasks}</div>\r\n                                <div className=\"inline_element\">{usr.count_closed_tasks}</div>\r\n                            </ListGroup.Item>\r\n                        ))\r\n                    }\r\n                </ListGroup>\r\n                <CreateUserModal\r\n                    show={this.state.isShow}\r\n                    onHide={() => this.setShow(false)}\r\n                    onSave={(data) => this.createUserHandler(data)} />\r\n            </div>;\r\n        } else {\r\n            return <div>Loading...</div>\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    userReducer: state.UserReduser,\r\n    user: state.Users,\r\n    isShow: false,\r\n    isRequested: state.Users ? state.Users.IsRequested : false\r\n});\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    null\r\n)(Users);"]},"metadata":{},"sourceType":"module"}